# üí∞ Mi Proyecto - Sistema de Gesti√≥n Financiera

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/tu-usuario/mi-proyecto-nextjs)
[![Tests](https://github.com/tu-usuario/mi-proyecto-nextjs/actions/workflows/test.yml/badge.svg)](https://github.com/tu-usuario/mi-proyecto-nextjs/actions/workflows/test.yml)

> **üåê Demo en vivo**: [https://gestion-financiera-fullstack.vercel.app](https://gestion-financiera-fullstack.vercel.app)

## üìã Descripci√≥n

Sistema integral de gesti√≥n financiera desarrollado con **Next.js 14** y **TypeScript**, que permite a usuarios y administradores gestionar transacciones financieras, generar reportes avanzados y controlar accesos mediante un sistema robusto de roles y permisos.

### ‚ú® Caracter√≠sticas Principales

- üîê **Autenticaci√≥n Segura** - OAuth con GitHub
- üí≥ **Gesti√≥n de Transacciones** - CRUD completo de ingresos y egresos
- üë• **Sistema de Roles** - Control granular USER/ADMIN
- üìä **Reportes Avanzados** - Gr√°ficos y estad√≠sticas en tiempo real
- üìÑ **Exportaci√≥n CSV** - Descarga de datos financieros
- üîí **Seguridad Robusta** - Middleware de autorizaci√≥n y validaci√≥n
- üìö **API Documentada** - Especificaci√≥n OpenAPI/Swagger completa
- üß™ **Testing Completo** - Cobertura >70% con Jest y RTL
- üì± **Responsive Design** - Optimizado para todos los dispositivos

## üöÄ Demo y Funcionalidades

### üéØ Flujo de Usuario Completo

1. **Autenticaci√≥n**: Login seguro con GitHub OAuth
2. **Dashboard**: Vista general de estad√≠sticas financieras
3. **Transacciones**: Visualizaci√≥n de ingresos y egresos
4. **Perfil**: Gesti√≥n de informaci√≥n personal
5. **Admin Panel**: Gesti√≥n de usuarios y reportes (solo administradores)

### üë§ Roles y Permisos

#### Usuario Regular (USER)
- ‚úÖ Ver sus propias transacciones
- ‚úÖ Acceder a su perfil y dashboard
- ‚úÖ Consultar documentaci√≥n de API
- ‚ùå Crear/editar/eliminar transacciones
- ‚ùå Ver panel de administraci√≥n

#### Administrador (ADMIN)
- ‚úÖ **Todas las funcionalidades de USER**
- ‚úÖ Gestionar todas las transacciones (CRUD)
- ‚úÖ Administrar usuarios del sistema
- ‚úÖ Generar y exportar reportes
- ‚úÖ Acceso completo al panel de administraci√≥n

## üõ†Ô∏è Stack Tecnol√≥gico

### Frontend
- **Next.js 14** - React framework con App Router
- **TypeScript** - Tipado est√°tico
- **Tailwind CSS** - Framework de estilos utilitarios
- **Shadcn/UI** - Componentes de interfaz modernos
- **Lucide React** - Iconograf√≠a consistente

### Backend
- **Next.js API Routes** - Endpoints REST
- **Prisma ORM** - Gesti√≥n de base de datos
- **PostgreSQL** - Base de datos relacional
- **Supabase** - Backend as a Service

### Autenticaci√≥n & Seguridad
- **GitHub OAuth** - Proveedor de autenticaci√≥n
- **Sesiones HTTP-only** - Manejo seguro de estado
- **Middleware de autorizaci√≥n** - Control de acceso granular
- **Validaci√≥n exhaustiva** - Sanitizaci√≥n de datos

### Testing & Calidad
- **Jest** - Framework de pruebas unitarias
- **React Testing Library** - Testing de componentes
- **ESLint + Prettier** - Linting y formateo
- **TypeScript strict mode** - Verificaci√≥n de tipos

## üì¶ Instalaci√≥n Local

### Prerrequisitos
- **Node.js 18+** 
- **PostgreSQL** (local o remoto)
- **Cuenta GitHub** (para OAuth)
- **Git**

### 1. Clonar el Repositorio
\`\`\`bash
git clone https://github.com/Cescobar332/gestion-financiera-fullstack.git
cd gestion-financiera-fullstack
\`\`\`

### 2. Instalar Dependencias

\`\`\`bash
npm install
\`\`\`

### 3. Configurar Variables de Entorno

Crea el archivo `.env.local` basado en `.env.example`:

\`\`\`bash
cp .env.example .env.local
\`\`\`

Completa las variables requeridas:

\`\`\`env
# Base de datos PostgreSQL
DATABASE_URL='postgres://postgres.jpvhprtxwlhdurznrtui:UAvAVcxxhnxpqIkj@aws-0-us-east-1.pooler.supabase.com:5432/postgres?sslmode=require'

# GitHub OAuth (crear en https://github.com/settings/applications/new)
GITHUB_CLIENT_ID="Ov23liHDv7tOc9LlNmEH"
GITHUB_CLIENT_SECRET="d65344b6c59df2c1ca19b2cccab20a77d21fe4c3"

# Clave secreta para autenticaci√≥n (generar aleatoria de 32+ caracteres)
BETTER_AUTH_SECRET="d8c1ae963d0de58b871683c6b425b103d4f60065f938a09c24d7a0f22cc76689"
# URL base de la aplicaci√≥n
NEXT_PUBLIC_BETTER_AUTH_URL="http://localhost:3000"
# Supabase (opcional)
NEXT_PUBLIC_SUPABASE_URL="https://tu-proyecto.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="tu_supabase_anon_key"
NEXT_PUBLIC_BETTER_AUTH_URL="http://localhost:3000"
\`\`\`

### 4. Configurar GitHub OAuth

1. Ve a [GitHub Settings > Developer settings > OAuth Apps](https://github.com/settings/applications/new)
2. Crea una nueva OAuth App:
   \`\`\`
   Application name: Mi Proyecto Financiero (Dev)
   Homepage URL: http://localhost:3000
   Authorization callback URL: http://localhost:3000/api/auth/callback/github
   \`\`\`
3. Copia el `Client ID` y `Client Secret` a tu `.env.local`

### 5. Configurar Base de Datos

#### Opci√≥n A: PostgreSQL Local
\`\`\`bash
# Instalar PostgreSQL y crear base de datos
createdb mi_proyecto

# Aplicar migraciones
npm run db:generate
npm run db:push
#### Opci√≥n B: Supabase (Recomendado)
1. Crea proyecto en [Supabase](https://supabase.com)
2. Ve a Settings > Database
3. Copia la Connection String
4. Aplica migraciones:
   \`\`\`bash
   npm run db:generate
   npm run db:push
   \`\`\`

### 6. Ejecutar en Desarrollo

\`\`\`bash
npm run dev
\`\`\`

üéâ **¬°Aplicaci√≥n disponible en [http://localhost:3000](http://localhost:3000)!**

### 7. Verificar Instalaci√≥n

\`\`\`bash
# Ejecutar pruebas
npm test

# Verificar build de producci√≥n
npm run build
\`\`\`

## üöÄ Despliegue en Vercel

### Despliegue R√°pido

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/tu-usuario/mi-proyecto-nextjs)

### Despliegue Manual

#### 1. Preparar Repositorio
\`\`\`bash
# Asegurar que el c√≥digo est√° en GitHub
git add .
git commit -m "Preparar para despliegue"
git push origin main
\`\`\`

#### 2. Configurar en Vercel
1. Ve a [Vercel Dashboard](https://vercel.com/dashboard)
2. Click "New Project"
3. Importa tu repositorio de GitHub
4. Configura las variables de entorno:

\`\`\`env
DATABASE_URL='postgres://postgres.jpvhprtxwlhdurznrtui:UAvAVcxxhnxpqIkj@aws-0-us-east-1.pooler.supabase.com:5432/postgres?sslmode=require'



# GitHub OAuth
GITHUB_CLIENT_ID="Ov23liHDv7tOc9LlNmEH"
GITHUB_CLIENT_SECRET="d65344b6c59df2c1ca19b2cccab20a77d21fe4c3"

# Better Auth
BETTER_AUTH_SECRET="d8c1ae963d0de58b871683c6b425b103d4f60065f938a09c24d7a0f22cc76689"
NEXT_PUBLIC_BETTER_AUTH_URL="http://localhost:3000"

\`\`\`

#### 3. Actualizar GitHub OAuth
1. Ve a tu OAuth App en GitHub
2. Actualiza las URLs:
   \`\`\`
   Homepage URL: https://tu-dominio.vercel.app
   Authorization callback URL: https://tu-dominio.vercel.app/api/auth/callback/github
   \`\`\`

#### 4. Deploy
1. Click "Deploy" en Vercel
2. Espera a que termine el build
3. ¬°Tu aplicaci√≥n estar√° disponible en la URL proporcionada!

### Verificaci√≥n Post-Despliegue

#### ‚úÖ Checklist de Funcionalidades

**B√°sicas:**
- [ ] P√°gina principal carga correctamente
- [ ] Navegaci√≥n funciona en todos los dispositivos
- [ ] Estilos se aplican correctamente

**Autenticaci√≥n:**
- [ ] Bot√≥n "Iniciar sesi√≥n con GitHub" funciona
- [ ] Proceso de OAuth completo funciona
- [ ] Usuario se autentica y ve su informaci√≥n
- [ ] Cerrar sesi√≥n funciona correctamente

**Funcionalidades Core:**
- [ ] Dashboard muestra estad√≠sticas del usuario
- [ ] P√°gina de transacciones carga datos
- [ ] Perfil de usuario muestra informaci√≥n correcta
- [ ] Navegaci√≥n entre p√°ginas funciona

**Administraci√≥n (solo para usuarios ADMIN):**
- [ ] Panel de administraci√≥n es accesible
- [ ] Gesti√≥n de usuarios funciona
- [ ] Creaci√≥n/edici√≥n de transacciones funciona
- [ ] Generaci√≥n de reportes funciona
- [ ] Exportaci√≥n CSV funciona

**Seguridad:**
- [ ] Usuarios no autenticados son redirigidos
- [ ] Usuarios regulares no pueden acceder a funciones admin
- [ ] API endpoints respetan permisos
- [ ] Sesiones persisten correctamente

**API y Documentaci√≥n:**
- [ ] `/api-docs` carga la documentaci√≥n
- [ ] Endpoints de API responden correctamente
- [ ] Especificaci√≥n OpenAPI es accesible

## üß™ Testing

### Ejecutar Pruebas

\`\`\`bash
# Todas las pruebas
npm test

# Modo watch para desarrollo
npm run test:watch

# Con reporte de cobertura
npm run test:coverage
\`\`\`
# Para CI/CD
npm run test:ci

### Cobertura de Pruebas
El proyecto mantiene **>70% de cobertura** en:
- **Branches**: 70%+
- **Functions**: 70%+
- **Lines**: 70%+
- **Statements**: 70%+

### Tipos de Pruebas Implementadas

- ‚úÖ **C√°lculos Financieros** - L√≥gica de balances y estad√≠sticas
- ‚úÖ **Validaci√≥n de Formularios** - Reglas de negocio y sanitizaci√≥n
- ‚úÖ **Control de Acceso** - Permisos y roles de usuario
- ‚úÖ **Componentes React** - Renderizado e interacciones
- ‚úÖ **Casos L√≠mite** - Manejo de errores y datos inv√°lidos

## üìö Documentaci√≥n

### API Documentation
- **Interfaz Web**: [/api-docs](https://mi-proyecto-financiero.vercel.app/api-docs)
- **Especificaci√≥n JSON**: [/api/docs](https://mi-proyecto-financiero.vercel.app/api/docs)

### Documentaci√≥n T√©cnica
- **Testing**: [docs/TESTING.md](docs/TESTING.md)
- **Despliegue**: [docs/DEPLOYMENT.md](docs/DEPLOYMENT.md)

### Endpoints Principales

#### Autenticaci√≥n
- `GET /api/auth/session` - Obtener sesi√≥n actual
- `POST /api/auth/signout` - Cerrar sesi√≥n

#### Transacciones
- `GET /api/transactions` - Listar transacciones
- `POST /api/transactions` - Crear transacci√≥n (Admin)
- `PUT /api/transactions/{id}` - Actualizar transacci√≥n (Admin)
- `DELETE /api/transactions/{id}` - Eliminar transacci√≥n (Admin)

#### Administraci√≥n
- `GET /api/admin/users` - Gesti√≥n de usuarios (Admin)
- `PATCH /api/admin/users` - Actualizar usuario (Admin)
- `GET /api/admin/reports` - Reportes financieros (Admin)


## üîß Scripts Disponibles

\`\`\`bash
# Desarrollo
npm run dev          # Servidor de desarrollo
npm run build        # Build de producci√≥n
npm run start        # Servidor de producci√≥n
npm run lint         # Linter

# Base de datos
npm run db:generate  # Generar cliente Prisma
npm run db:push      # Aplicar cambios al esquema
npm run db:studio    # Abrir Prisma Studio

# Pruebas
npm test             # Ejecutar pruebas
npm run test:watch   # Pruebas en modo watch
npm run test:coverage # Pruebas con cobertura
npm run test:ci      # Pruebas para CI/CD
\`\`\`

## ü§ù Contribuci√≥n

### Flujo de Desarrollo

1. **Fork** del repositorio
2. **Crear rama** feature: `git checkout -b feature/nueva-funcionalidad`
3. **Desarrollar** con pruebas incluidas
4. **Commit** cambios: `git commit -m 'feat: agregar nueva funcionalidad'`
5. **Push** a la rama: `git push origin feature/nueva-funcionalidad`
6. **Crear Pull Request**

### Est√°ndares de C√≥digo
- ‚úÖ **TypeScript strict mode**
- ‚úÖ **ESLint + Prettier** configurados
- ‚úÖ **Conventional Commits**
- ‚úÖ **Pruebas unitarias** requeridas
- ‚úÖ **Cobertura m√≠nima** 70%

### Antes de Contribuir

\`\`\`bash
# Verificar que todo funciona
npm run lint
npm test
npm run build
\`\`\`

## üêõ Troubleshooting

### Problemas Comunes

#### Error de Autenticaci√≥n
\`\`\`bash
# Verificar variables de entorno
echo $GITHUB_CLIENT_ID
echo $NEXT_PUBLIC_BETTER_AUTH_URL

# Verificar URLs de callback en GitHub OAuth App
\`\`\`

#### Error de Base de Datos
\`\`\`bash
# Verificar conexi√≥n
npm run db:studio

# Regenerar cliente Prisma
npm run db:generate
\`\`\`

#### Error de Build
\`\`\`bash
# Limpiar cache
rm -rf .next
npm run build
\`\`\`

### Obtener Ayuda

- üêõ **Bugs**: [GitHub Issues](https://github.com/tu-usuario/mi-proyecto-nextjs/issues)
- üí¨ **Preguntas**: [GitHub Discussions](https://github.com/tu-usuario/mi-proyecto-nextjs/discussions)
- üìß **Soporte**: soporte@miproyecto.com

## üìÑ Licencia

Este proyecto est√° bajo la **Licencia MIT**. Ver [LICENSE](LICENSE) para m√°s detalles.

## üéØ Roadmap

### Pr√≥ximas Funcionalidades
- [ ] üì± Aplicaci√≥n m√≥vil (React Native)
- [ ] üîî Notificaciones en tiempo real
- [ ] üè¶ Integraci√≥n con bancos (Open Banking)
- [ ] ü§ñ An√°lisis predictivo con IA
- [ ] üí± Soporte para m√∫ltiples monedas
- [ ] üè∑Ô∏è Categor√≠as personalizables
- [ ] üìä Dashboard avanzado con m√°s gr√°ficos

### Mejoras T√©cnicas
- [ ] üß™ Pruebas E2E con Playwright
- [ ] ‚ö° Optimizaci√≥n de performance
- [ ] üì± PWA (Progressive Web App)
- [ ] üåç Internacionalizaci√≥n (i18n)
- [ ] üì¥ Modo offline
- [ ] üîç B√∫squeda avanzada
- [ ] üìà Analytics y m√©tricas

## üåü Agradecimientos

- **Next.js Team** - Por el excelente framework
- **Vercel** - Por la plataforma de despliegue
- **Shadcn** - Por los componentes de UI
- **Prisma Team** - Por el ORM excepcional
- **GitHub** - Por la plataforma de desarrollo

---

<div align="center">

**üöÄ ¬°Desarrollado con ‚ù§Ô∏è usando Next.js y TypeScript!**

[üåê Demo](https://mi-proyecto-financiero.vercel.app) ‚Ä¢ [üìö Docs](https://mi-proyecto-financiero.vercel.app/api-docs) ‚Ä¢ [üêõ Issues](https://github.com/tu-usuario/mi-proyecto-nextjs/issues) ‚Ä¢ [üí¨ Discussions](https://github.com/tu-usuario/mi-proyecto-nextjs/discussions)

</div>
\`\`\`

```plaintext file=".gitignore"
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# local env files
.env*.local
.env

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts

# prisma
/prisma/migrations

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
Thumbs.db

# Logs
logs
*.log

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Coverage directory used by tools like istanbul
coverage/
*.lcov

# nyc test coverage
.nyc_output

# Dependency directories
node_modules/
jspm_packages/

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# next.js build output
.next

# nuxt.js build output
.nuxt

# vuepress build output
.vuepress/dist

# Serverless directories
.serverless

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test
